{"ast":null,"code":"import _regeneratorRuntime from\"/Users/williamchan/Documents/side_projects/auto-send/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/williamchan/Documents/side_projects/auto-send/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/williamchan/Documents/side_projects/auto-send/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _this=this;import React,{useContext,useState,useEffect}from\"react\";import{CircularProgress,CardContent,Divider,Typography,Button,DialogTitle,DialogContent,DialogActions}from\"@material-ui/core\";import{InputField,CustomCard,ActionButton,Title,Text,EmailPreview,HelpIcon,HelpDialog,ErrorDialog}from\"./Materials\";import EmailService from\"../../services/EmailService\";import UserProfile from\"../../contexts/UserProfile\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Email=function Email(){var _useContext=useContext(UserProfile),_useContext2=_slicedToArray(_useContext,2),profile=_useContext2[0],setProfile=_useContext2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openError=_useState2[0],setOpenError=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var subjectRef=/*#__PURE__*/React.createRef();var ccRef=/*#__PURE__*/React.createRef();var bccRef=/*#__PURE__*/React.createRef();var recipientsRef=/*#__PURE__*/React.createRef();var namesRef=/*#__PURE__*/React.createRef();var positionsRef=/*#__PURE__*/React.createRef();var messageRef=/*#__PURE__*/React.createRef();var previewRef=/*#__PURE__*/React.createRef();var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),helpOpen=_useState8[0],setHelpOpen=_useState8[1];var intro=\" To get started make sure you input an email subject, the list of recipients, and the message you want to send.\";var fieldInfoTitle=\"Field Information\";var fieldInfoDesc=\"- Recipients represents the emails of the people you want to send to\\n  - Recipients represents the emails of the people you want to send to\\n  - Names represents the names of the people you want to send to\\n  - Positions represents the positions that the people applied for\";var howTitle=\"Filling out Fields:\";var howDesc=\" - If you plan to bcc/cc more than one person, make sure to separate their emails by a comma \\n  (Example: jane.doe@gmail.com, testing@gmail.com)\\n\\n  - Recipients, names, and position should also be separated by a comma if there are several people. Make sure you list them out in the same order\\n  (Example:\\n   Recipients: jane.doe@gmail.com, john@gmail.com\\n   Names: Jane, John\\n   Position: Cookie, Monster)\";var emailContent={};useEffect(function(){setTimeout(function(){return setLoading(false);},700);},[]);function handleClick(){emailContent[\"email\"]=profile.email;emailContent[\"password\"]=profile.password;emailContent[\"subject\"]=subjectRef.current.children[1].children[0].value;emailContent[\"cc\"]=ccRef.current.children[1].children[0].value;emailContent[\"bcc\"]=bccRef.current.children[1].children[0].value;emailContent[\"recipients\"]=recipientsRef.current.children[1].children[0].value;emailContent[\"names\"]=namesRef.current.children[1].children[0].value;emailContent[\"positions\"]=positionsRef.current.children[1].children[0].value;emailContent[\"message\"]=messageRef.current.children[1].children[0].value;_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return EmailService.sendEmail(JSON.stringify(emailContent));case 3:error=_context.sent;if(!error.data){setLoading(false);setErrorMessage(\"One or more of your recipients' emails are invalid, please check them over before sending an email again\");setOpenError(!openError);}case 5:case\"end\":return _context.stop();}}},_callee);}))();}function handleChange(){var name=namesRef.current.children[1].children[0].value.split(\",\")[0];var position=positionsRef.current.children[1].children[0].value.split(\",\")[0];var message=messageRef.current.children[1].children[0].value.replace(\"{name}\",name).replace(\"{position}\",position);previewRef.current.innerText=message;}function errorHandling(){var subject=subjectRef.current.children[1].children[0].value;var recipients=recipientsRef.current.children[1].children[0].value;var message=messageRef.current.children[1].children[0].value;if(subject===\"\"||recipients===\"\"||message===\"\"){setErrorMessage(\"One of the required fields have not been filled out, please complete them in order to send an email\");setOpenError(!openError);}else{handleClick();}}function openHelpDialog(){setHelpOpen(!helpOpen);}function closeErrorDialog(){setOpenError(!openError);}return/*#__PURE__*/_jsxs(\"div\",{class:\"h-full\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"px-2\",children:[/*#__PURE__*/_jsxs(ErrorDialog,{open:openError,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Error\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(Typography,{gutterBottom:true,children:errorMessage})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:closeErrorDialog.bind(_this),children:\"Close\"})})]}),/*#__PURE__*/_jsxs(HelpDialog,{open:helpOpen,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Guide\"}),/*#__PURE__*/_jsx(Divider,{style:{background:\"#7E7E7E\"}}),/*#__PURE__*/_jsxs(DialogContent,{style:{whiteSpace:\"pre-line\"},dividers:true,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,paragraph:true,children:intro}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:fieldInfoTitle}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,paragraph:true,children:fieldInfoDesc}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",gutterBottom:true,children:howTitle}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",gutterBottom:true,paragraph:true,children:howDesc})]}),/*#__PURE__*/_jsx(Divider,{style:{background:\"#7E7E7E\"}}),/*#__PURE__*/_jsx(DialogActions,{dividers:true,children:/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:openHelpDialog.bind(_this),children:\"Close\"})})]})]}),loading===false?/*#__PURE__*/_jsxs(\"div\",{class:\"flex content-center p-5 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"flex-none h-full px-2 py-2\",children:/*#__PURE__*/_jsx(CustomCard,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsxs(\"div\",{class:\"px-2\",children:[/*#__PURE__*/_jsx(Title,{display:\"inline\",variant:\"h6\",children:\"Email Information\"}),/*#__PURE__*/_jsx(HelpIcon,{onClick:openHelpDialog.bind(_this)})]}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{required:true,ref:subjectRef,label:\"Subject\",variant:\"outlined\",fullWidth:true})})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2\",children:[/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{ref:bccRef,label:\"BCC\",variant:\"outlined\",fullWidth:true})})}),/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{ref:ccRef,label:\"CC\",variant:\"outlined\",fullWidth:true})})})]}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{required:true,ref:recipientsRef,label:\"Recipients\",variant:\"outlined\",fullWidth:true})})})}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{ref:namesRef,label:\"Names\",variant:\"outlined\",fullWidth:true})})})}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-6 px-2\",children:/*#__PURE__*/_jsx(InputField,{ref:positionsRef,label:\"Positions\",variant:\"outlined\",fullWidth:true})})})}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1\",children:/*#__PURE__*/_jsx(\"form\",{noValidate:true,autoComplete:\"off\",children:/*#__PURE__*/_jsx(\"div\",{class:\"mt-5 px-2\",children:/*#__PURE__*/_jsx(InputField,{required:true,ref:messageRef,onChange:handleChange.bind(_this),label:\"Message\",variant:\"outlined\",fullWidth:true,multiline:true,rows:10})})})}),/*#__PURE__*/_jsx(\"div\",{class:\"grid grid-cols-1 px-2 mt-6\",children:/*#__PURE__*/_jsx(ActionButton,{onClick:errorHandling.bind(_this),children:\"Send Messages\"})})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"flex-none h-full px-2 sm:grid-cols-1 py-2\",children:/*#__PURE__*/_jsx(CustomCard,{children:/*#__PURE__*/_jsxs(EmailPreview,{style:{whiteSpace:\"pre-line\"},children:[/*#__PURE__*/_jsx(\"div\",{class:\"px-2\",children:/*#__PURE__*/_jsx(Title,{variant:\"h6\",children:\"Email Preview\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"h-full flex flex-wrap content-center justify-center py-5\",children:/*#__PURE__*/_jsx(Text,{ref:previewRef,children:\"Type a message to see me update\"})})]})})})]}):/*#__PURE__*/_jsx(\"div\",{class:\"h-full flex flex-wrap content-center justify-center\",children:/*#__PURE__*/_jsx(CircularProgress,{size:100})})]});};export default Email;","map":{"version":3,"sources":["/Users/williamchan/Documents/side_projects/auto-send/client/src/components/email/Email.js"],"names":["React","useContext","useState","useEffect","CircularProgress","CardContent","Divider","Typography","Button","DialogTitle","DialogContent","DialogActions","InputField","CustomCard","ActionButton","Title","Text","EmailPreview","HelpIcon","HelpDialog","ErrorDialog","EmailService","UserProfile","Email","profile","setProfile","openError","setOpenError","errorMessage","setErrorMessage","loading","setLoading","subjectRef","createRef","ccRef","bccRef","recipientsRef","namesRef","positionsRef","messageRef","previewRef","helpOpen","setHelpOpen","intro","fieldInfoTitle","fieldInfoDesc","howTitle","howDesc","emailContent","setTimeout","handleClick","email","password","current","children","value","sendEmail","JSON","stringify","error","data","handleChange","name","split","position","message","replace","innerText","errorHandling","subject","recipients","openHelpDialog","closeErrorDialog","bind","background","whiteSpace"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport {\n  CircularProgress,\n  CardContent,\n  Divider,\n  Typography,\n  Button,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport {\n  InputField,\n  CustomCard,\n  ActionButton,\n  Title,\n  Text,\n  EmailPreview,\n  HelpIcon,\n  HelpDialog,\n  ErrorDialog,\n} from \"./Materials\";\nimport EmailService from \"../../services/EmailService\";\nimport UserProfile from \"../../contexts/UserProfile\";\n\nconst Email = () => {\n  const [profile, setProfile] = useContext(UserProfile);\n  const [openError, setOpenError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n\n  const subjectRef = React.createRef();\n  const ccRef = React.createRef();\n  const bccRef = React.createRef();\n  const recipientsRef = React.createRef();\n  const namesRef = React.createRef();\n  const positionsRef = React.createRef();\n  const messageRef = React.createRef();\n  const previewRef = React.createRef();\n  const [helpOpen, setHelpOpen] = useState(false);\n\n  const intro = ` To get started make sure you input an email subject, the list of recipients, and the message you want to send.`;\n\n  const fieldInfoTitle = \"Field Information\";\n  const fieldInfoDesc = `- Recipients represents the emails of the people you want to send to\n  - Recipients represents the emails of the people you want to send to\n  - Names represents the names of the people you want to send to\n  - Positions represents the positions that the people applied for`;\n\n  const howTitle = \"Filling out Fields:\";\n  const howDesc = ` - If you plan to bcc/cc more than one person, make sure to separate their emails by a comma \n  (Example: jane.doe@gmail.com, testing@gmail.com)\n\n  - Recipients, names, and position should also be separated by a comma if there are several people. Make sure you list them out in the same order\n  (Example:\n   Recipients: jane.doe@gmail.com, john@gmail.com\n   Names: Jane, John\n   Position: Cookie, Monster)`;\n\n  let emailContent = {};\n\n  useEffect(() => {\n    setTimeout(() => setLoading(false), 700);\n  }, []);\n\n  function handleClick() {\n    emailContent[\"email\"] = profile.email;\n    emailContent[\"password\"] = profile.password;\n    emailContent[\"subject\"] = subjectRef.current.children[1].children[0].value;\n    emailContent[\"cc\"] = ccRef.current.children[1].children[0].value;\n    emailContent[\"bcc\"] = bccRef.current.children[1].children[0].value;\n    emailContent[\"recipients\"] =\n      recipientsRef.current.children[1].children[0].value;\n    emailContent[\"names\"] = namesRef.current.children[1].children[0].value;\n    emailContent[\"positions\"] =\n      positionsRef.current.children[1].children[0].value;\n    emailContent[\"message\"] = messageRef.current.children[1].children[0].value;\n\n    (async () => {\n      setLoading(true);\n      const error = await EmailService.sendEmail(JSON.stringify(emailContent));\n      if (!error.data) {\n        setLoading(false);\n        setErrorMessage(\n          \"One or more of your recipients' emails are invalid, please check them over before sending an email again\"\n        );\n        setOpenError(!openError);\n      }\n    })();\n  }\n\n  function handleChange() {\n    let name = namesRef.current.children[1].children[0].value.split(\",\")[0];\n    let position =\n      positionsRef.current.children[1].children[0].value.split(\",\")[0];\n    let message = messageRef.current.children[1].children[0].value\n      .replace(\"{name}\", name)\n      .replace(\"{position}\", position);\n    previewRef.current.innerText = message;\n  }\n\n  function errorHandling() {\n    let subject = subjectRef.current.children[1].children[0].value;\n    let recipients = recipientsRef.current.children[1].children[0].value;\n    let message = messageRef.current.children[1].children[0].value;\n\n    if (subject === \"\" || recipients === \"\" || message === \"\") {\n      setErrorMessage(\n        \"One of the required fields have not been filled out, please complete them in order to send an email\"\n      );\n      setOpenError(!openError);\n    } else {\n      handleClick();\n    }\n  }\n\n  function openHelpDialog() {\n    setHelpOpen(!helpOpen);\n  }\n\n  function closeErrorDialog() {\n    setOpenError(!openError);\n  }\n\n  return (\n    <div class=\"h-full\">\n      <div class=\"px-2\">\n        <ErrorDialog open={openError}>\n          <DialogTitle>Error</DialogTitle>\n          <DialogContent>\n            <Typography gutterBottom>{errorMessage}</Typography>\n          </DialogContent>\n          <DialogActions>\n            <Button color=\"primary\" onClick={closeErrorDialog.bind(this)}>\n              Close\n            </Button>\n          </DialogActions>\n        </ErrorDialog>\n\n        <HelpDialog open={helpOpen}>\n          <DialogTitle>Guide</DialogTitle>\n          <Divider style={{ background: \"#7E7E7E\" }} />\n          <DialogContent style={{ whiteSpace: \"pre-line\" }} dividers>\n            <Typography variant=\"body1\" gutterBottom paragraph>\n              {intro}\n            </Typography>\n\n            <Typography variant=\"subtitle1\" gutterBottom>\n              {fieldInfoTitle}\n            </Typography>\n            <Typography variant=\"body1\" gutterBottom paragraph>\n              {fieldInfoDesc}\n            </Typography>\n\n            <Typography variant=\"subtitle1\" gutterBottom>\n              {howTitle}\n            </Typography>\n            <Typography variant=\"body1\" gutterBottom paragraph>\n              {howDesc}\n            </Typography>\n          </DialogContent>\n          <Divider style={{ background: \"#7E7E7E\" }} />\n          <DialogActions dividers>\n            <Button color=\"primary\" onClick={openHelpDialog.bind(this)}>\n              Close\n            </Button>\n          </DialogActions>\n        </HelpDialog>\n      </div>\n      {loading === false ? (\n        <div class=\"flex content-center p-5 grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2\">\n          <div class=\"flex-none h-full px-2 py-2\">\n            <CustomCard>\n              <CardContent>\n                <div class=\"px-2\">\n                  <Title display=\"inline\" variant=\"h6\">\n                    Email Information\n                  </Title>\n                  <HelpIcon onClick={openHelpDialog.bind(this)} />\n                </div>\n                <div class=\"grid grid-cols-1\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        required\n                        ref={subjectRef}\n                        label=\"Subject\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        ref={bccRef}\n                        label=\"BCC\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        ref={ccRef}\n                        label=\"CC\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid grid-cols-1\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        required\n                        ref={recipientsRef}\n                        label=\"Recipients\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid grid-cols-1\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        ref={namesRef}\n                        label=\"Names\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid grid-cols-1\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-6 px-2\">\n                      <InputField\n                        ref={positionsRef}\n                        label=\"Positions\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid grid-cols-1\">\n                  <form noValidate autoComplete=\"off\">\n                    <div class=\"mt-5 px-2\">\n                      <InputField\n                        required\n                        ref={messageRef}\n                        onChange={handleChange.bind(this)}\n                        label=\"Message\"\n                        variant=\"outlined\"\n                        fullWidth={true}\n                        multiline\n                        rows={10}\n                      ></InputField>\n                    </div>\n                  </form>\n                </div>\n\n                <div class=\"grid grid-cols-1 px-2 mt-6\">\n                  <ActionButton onClick={errorHandling.bind(this)}>\n                    Send Messages\n                  </ActionButton>\n                </div>\n              </CardContent>\n            </CustomCard>\n          </div>\n\n          <div class=\"flex-none h-full px-2 sm:grid-cols-1 py-2\">\n            <CustomCard>\n              <EmailPreview style={{ whiteSpace: \"pre-line\" }}>\n                <div class=\"px-2\">\n                  <Title variant=\"h6\">Email Preview</Title>\n                </div>\n                <div class=\"h-full flex flex-wrap content-center justify-center py-5\">\n                  <Text ref={previewRef}>Type a message to see me update</Text>\n                </div>\n              </EmailPreview>\n            </CustomCard>\n          </div>\n        </div>\n      ) : (\n        <div class=\"h-full flex flex-wrap content-center justify-center\">\n          <CircularProgress size={100} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Email;\n"]},"metadata":{},"sourceType":"module"}